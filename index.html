<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Food Wheel of Fortune</title>
    <style>
      body {
        font-family: "Roboto", sans-serif;
        text-align: center;
        background: linear-gradient(135deg, #f7f9fc, #e9eff5);
        margin: 0;
        padding: 40px 20px;
      }
      canvas {
        background: #ffffff;
        border: none;
        border-radius: 50%;
        display: block;
        margin: 20px auto;
        width: 100%;
        max-width: 500px;
        height: auto;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }
      button {
        font-size: 18px;
        padding: 12px 30px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background: linear-gradient(45deg, #6a11cb, #2575fc);
        color: #fff;
        transition: transform 0.2s ease;
      }
      button:hover {
        transform: scale(1.05);
      }
      button:active {
        transform: scale(0.98);
      }
      header {
        background-color: #f7f9fc;
        padding: 20px;
        border-radius: 10px 10px 0 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      header h1 {
        font-size: 36px;
        margin-bottom: 10px;
        color: #333;
      }
      header p {
        font-size: 18px;
        color: #666;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Welcome to Food Wheel of Fortune!</h1>
      <p>Spin the wheel and enjoy a delicious surprise.</p>
    </header>
    <canvas id="wheelCanvas"></canvas>
    <button id="spinButton">Spin the Wheel!</button>
    <div id="result" style="font-size: 24px; margin-top: 20px"></div>

    <script>
      // Get canvas and context
      const canvas = document.getElementById("wheelCanvas");
      const ctx = canvas.getContext("2d");
      const resultDiv = document.getElementById("result");

      // Food options array
      const foodOptions = [
        "Pizza",
        "Burger",
        "Sushi",
        "Pasta",
        "Salad",
        "Tacos",
        "Steak",
        "Ice Cream",
      ];

      // Colors for each segment (optional: you can add more colors)
      const colors = [
        "#FF6384",
        "#36A2EB",
        "#FFCE56",
        "#4BC0C0",
        "#9966FF",
        "#FF9F40",
        "#8BC34A",
        "#F44336",
      ];

      const numSegments = foodOptions.length;
      let centerX = canvas.width / 2;
      let centerY = canvas.height / 2;
      let outerRadius = Math.min(centerX, centerY) - 10; // leave some margin

      // Wheel properties
      let currentAngle = 0;
      let angularVelocity = 0; // radians per frame
      let spinning = false;
      const friction = 0.995; // friction per frame (adjust for deceleration)

      // Function to draw the wheel
      function drawWheel() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw each segment
        const anglePerSegment = (2 * Math.PI) / numSegments;
        for (let i = 0; i < numSegments; i++) {
          const startAngle = currentAngle + i * anglePerSegment;
          const endAngle = startAngle + anglePerSegment;

          // Draw segment
          ctx.beginPath();
          ctx.moveTo(centerX, centerY);
          ctx.arc(centerX, centerY, outerRadius, startAngle, endAngle);
          ctx.closePath();
          ctx.fillStyle = colors[i % colors.length];
          ctx.fill();
          ctx.strokeStyle = "#ffffff";
          ctx.lineWidth = 2;
          ctx.stroke();

          // Draw text in the segment
          ctx.save();
          ctx.translate(centerX, centerY);
          ctx.rotate(startAngle + anglePerSegment / 2);
          ctx.textAlign = "right";
          ctx.fillStyle = "#333";
          ctx.font = "bold 18px sans-serif";
          ctx.fillText(foodOptions[i], outerRadius - 10, 10);
          ctx.restore();
        }

        // Draw a pointer at the top (to show the winning segment)
        ctx.shadowColor = "rgba(0, 0, 0, 0)"; // Reset shadow

        // Draw outer white triangle
        ctx.beginPath();
        ctx.moveTo(centerX - 22, centerY - outerRadius - 7);
        ctx.lineTo(centerX + 22, centerY - outerRadius - 7);
        ctx.lineTo(centerX, centerY - outerRadius + 50);
        ctx.closePath();
        ctx.fillStyle = "#ffffff";
        ctx.fill();

        // Draw inner black triangle
        ctx.beginPath();
        ctx.moveTo(centerX - 19, centerY - outerRadius - 9);
        ctx.lineTo(centerX + 19, centerY - outerRadius - 9);
        ctx.lineTo(centerX, centerY - outerRadius + 45);
        ctx.closePath();
        ctx.fillStyle = "#000000";
        ctx.fill();

        // Add shadow effect
        ctx.shadowColor = "rgba(0, 0, 0, 0.6)";
        ctx.shadowBlur = 15;
        ctx.shadowOffsetX = 4;
        ctx.shadowOffsetY = 4;
      }

      // Make canvas responsive: update canvas size and recalc dimensions on resize
      function resizeCanvas() {
        const size = canvas.clientWidth;
        canvas.width = size;
        canvas.height = size;
        centerX = canvas.width / 2;
        centerY = canvas.height / 2;
        outerRadius = Math.min(centerX, centerY) - 10;
        drawWheel();
      }
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      // Animation loop
      function animate() {
        if (spinning) {
          // Update angle
          currentAngle += angularVelocity;

          // Apply friction to gradually slow down
          angularVelocity *= friction;

          // Stop spinning if the velocity is low enough
          if (Math.abs(angularVelocity) < 0.0005) {
            spinning = false;
            angularVelocity = 0;
            // Determine which segment is at the pointer (at the top)
            let normalizedAngle = currentAngle % (2 * Math.PI);
            if (normalizedAngle < 0) normalizedAngle += 2 * Math.PI;
            // Pointer is at angle -90° (or 270° in canvas coordinate with 0 at 3 o'clock)
            const pointerAngle =
              ((3 * Math.PI) / 2 - normalizedAngle + 2 * Math.PI) %
              (2 * Math.PI);
            const segmentIndex = Math.floor(
              pointerAngle / ((2 * Math.PI) / numSegments)
            );
            resultDiv.textContent =
              "You got: " + foodOptions[segmentIndex] + "!";
          }
        }
        drawWheel();
        requestAnimationFrame(animate);
      }

      // Start animation
      animate();

      // Spin button click event
      document
        .getElementById("spinButton")
        .addEventListener("click", function () {
          if (!spinning) {
            resultDiv.textContent = "";
            // Set a random angular velocity between some minimum and maximum
            angularVelocity = Math.random() * 0.3 + 0.3; // adjust values as needed
            spinning = true;
          }
        });
    </script>
  </body>
</html>
